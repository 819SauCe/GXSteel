import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{o as ta,a as g}from"../chunks/CiLgDobt.js";import{o as K,ak as ea,aw as sa,ax as ia,F as W,an as l,ar as ra,as as L,G as Q,al as oa,ao as r,b as a,m as b,e as d,ap as i,aq as la,u as j,az as na}from"../chunks/B_avD7is.js";import{e as ca,i as da}from"../chunks/Dg-lTkvm.js";import{s as S}from"../chunks/D6BdYcV5.js";import{e as h}from"../chunks/BSm9NKN5.js";import{i as pa}from"../chunks/THlpKRrz.js";import{s as ma,a as ua}from"../chunks/CNNaBzJO.js";import{p as va}from"../chunks/Cb9_aZ1L.js";function ba(o,f,u){var n=o==null?"":""+o;return n=n?n+" "+f:f,n===""?null:n}function V(o,f,u,n,x,_){var t=o.__className;if(K||t!==u||t===void 0){var c=ba(u,n);(!K||c!==o.getAttribute("class"))&&(c==null?o.removeAttribute("class"):o.className=c),o.__className=u}return _}var fa=W('<button type="button" class="thumbnail-wrapper svelte-q5d10x" style="background-color: transparent;" tabindex="0"><img alt="Thumbnail"/></button>'),ga=W('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"/> <div class="container mt-5"><div class="row"><div class="col-md-6 mb-4"><img alt="Product" class="img-fluid rounded mb-3 product-image svelte-q5d10x"/> <div class="d-flex justify-content-between"></div></div> <div class="col-md-6"><h2 class="mb-3"> </h2> <p class="text-muted mb-4"> </p> <div class="mb-3"><i class="bi bi-star-fill text-warning"></i> <i class="bi bi-star-fill text-warning"></i> <i class="bi bi-star-fill text-warning"></i> <i class="bi bi-star-fill text-warning"></i> <i class="bi bi-star-half text-warning"></i> <span class="ms-2"> </span></div> <p class="mb-4"> </p> <button class="btn btn-primary btn-lg mb-3 me-2 svelte-q5d10x">Peça agora!</button> <button class="btn btn-outline-secondary btn-lg mb-3 svelte-q5d10x"><i></i> </button> <div class="mt-4"><h5>Principais Características:</h5> <ul><li>Alta resistência e durabilidade</li> <li>Versatilidade para múltiplas aplicações</li> <li>Qualidade certificada</li> <li>Entrega rápida e confiável</li></ul></div></div></div></div>',1);function Ea(o,f){ea(f,!1);const[u,n]=ma(),x=()=>ua(va,"$page",u),_=b();let t=b([]),c=b(""),E=b([]),P=b(0),F={},p=b(!1);function N(v){d(c,v)}function B(){window.open(`https://api.whatsapp.com/send?phone=+551640424000&text=Olá, gostaria de saber mais sobre o produto: ${a(t).name}`,"_blank")}async function H(){const v=`https://api.globalxsteel.com.br/api/${a(p)?"unlike_product":"like_product"}/${a(t)._id}`,e="PUT";try{const s=await fetch(v,{method:e,credentials:"include"}),m=await s.json();s.ok?(d(p,!a(p)),na(t,a(t).likes=a(p)?(a(t).likes||0)+1:Math.max((a(t).likes||1)-1,0))):console.error(m.error||"Erro ao curtir/descurtir")}catch(s){console.error("Erro:",s)}}ta(async()=>{const e=await(await fetch(`https://api.globalxsteel.com.br/api/product/${a(_)}`)).json();d(t,e),d(c,Array.isArray(e.image)?e.image[0]:""),F=e.ratings,d(P,Object.keys(F).length),d(E,Array.isArray(e.image)?[...e.image]:[]),Array.isArray(e.comments)&&[...e.comments];try{const m=await(await fetch("https://api.globalxsteel.com.br/api/protected",{credentials:"include"})).json();d(p,m.liked&&m.liked.includes(a(t)._id))}catch{console.warn("Usuário não autenticado ou erro ao buscar favoritos")}}),sa(()=>x(),()=>{d(_,x().params.id)}),ia(),pa();var R=ga(),T=l(ra(R),2),U=r(T),y=r(U),I=r(y),M=l(I,2);ca(M,5,()=>a(E),da,(v,e)=>{var s=fa(),m=r(s);i(s),L(()=>{S(m,"src",a(e)),V(m,1,`thumbnail rounded ${a(c)===a(e)?"active":""}`,"svelte-q5d10x")}),h("click",s,()=>N(a(e))),h("keydown",s,G=>(G.key==="Enter"||G.key===" ")&&N(a(e))),Q(v,s)}),i(M),i(y);var O=l(y,2),k=r(O),J=r(k,!0);i(k);var w=l(k,2),X=r(w);i(w);var $=l(w,2),z=l(r($),10),Y=r(z);i(z),i($);var A=l($,2),Z=r(A,!0);i(A);var C=l(A,2),q=l(C,2),D=r(q),aa=l(D);i(q),la(2),i(O),i(U),i(T),L(()=>{S(I,"src",a(c)),g(J,(a(t),j(()=>a(t).name))),g(X,`SKU: ${a(t),j(()=>a(t)._id)??""}`),g(Y,`4.5 (${a(P)??""} reviews)`),g(Z,(a(t),j(()=>a(t).description))),V(D,1,`bi ${a(p)?"bi-heart-fill text-danger":"bi-heart"}`,"svelte-q5d10x"),g(aa,` ${a(p)?" Remover dos Favoritos":" Adicionar aos Favoritos"}`)}),h("click",C,B),h("click",q,H),Q(o,R),oa(),n()}export{Ea as component};
