import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{a as $,o as Z}from"../chunks/gLeDYmC_.js";import{ak as D,F as S,ao as r,ap as s,an as n,ai as i,u as l,G as L,au as B,b as e,m as p,al as H,e as m,ar as O,as as aa,at as ea,az as ta}from"../chunks/TuAAAhIx.js";import{i as I}from"../chunks/JlXgioN4.js";import{e as J,i as Q}from"../chunks/DT7SAUDe.js";import{i as W}from"../chunks/fiVq5UUJ.js";import{s as j}from"../chunks/DmVmlLuy.js";import{s as ra,c as sa}from"../chunks/E8fswXEZ.js";import{e as oa}from"../chunks/C2TaQOJY.js";import{p as ia}from"../chunks/B3-v_f3B.js";/* empty css                */import{L as la}from"../chunks/GLRtXhsL.js";var ca=S('<span class="text-muted text-decoration-line-through ms-2"> </span>'),na=S('<i class="bi bi-star-fill text-warning me-1 svelte-ru78kc"></i>'),da=S('<div class="card card-fixed m-3 svelte-ru78kc"><a><img class="card-img-top svelte-ru78kc"/></a> <div class="card-body svelte-ru78kc"><a><h5 class="card-title svelte-ru78kc"> </h5></a> <p class="card-text svelte-ru78kc" style="font-size: 0.95rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;"> </p> <p class="card-text mb-1 svelte-ru78kc"><span class="text-danger fw-bold svelte-ru78kc"> </span> <!></p> <p class="mb-2 d-flex align-items-center"><!> <span class="text-muted ms-1"> </span></p> <div class="d-flex justify-content-between align-items-center"><a class="btn btn-primary svelte-ru78kc">Comprar</a> <div class="d-flex align-items-center"><button class="like-btn svelte-ru78kc" aria-label="true"><i></i></button> <span class="text-muted ms-2"> </span></div></div></div></div>');function pa(z,K){D(K,!1);let a=ia(K,"product",12),_=p(!1);async function h(){try{const d=await fetch(`https://api.globalxsteel.com.br/api/like_product/${a().id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"});if(!d.ok)throw new Error("Erro ao favoritar produto");const M=await d.json();m(_,!0),a(a().liked+=1,!0)}catch(d){console.error(d),alert("VocÃª precisa estar logado para curtir produtos.")}}W();var b=da(),c=r(b),P=r(c);s(c);var g=n(c,2),u=r(g),x=r(u),T=r(x,!0);s(x),s(u);var k=n(u,2),C=r(k,!0);s(k);var y=n(k,2),w=r(y),A=r(w);s(w);var F=n(w,2);{var o=d=>{var M=ca(),R=r(M);s(M),B(()=>$(R,`R$ ${i(a()),l(()=>a().precoOriginal)??""}`)),L(d,M)};I(F,d=>{i(a()),l(()=>a().precoOriginal)&&d(o)})}s(y);var f=n(y,2),t=r(f);J(t,1,()=>(i(a()),l(()=>Array(Number(a().stars)).fill(0))),Q,(d,M)=>{var R=na();L(d,R)});var v=n(t,2),N=r(v);s(v),s(f);var q=n(f,2),G=r(q),U=n(G,2),E=r(U),X=r(E);s(E);var V=n(E,2),Y=r(V);s(V),s(U),s(q),s(g),s(b),B(()=>{j(c,"href",`/produto/${i(a()),l(()=>a().id)??""}`),j(P,"src",(i(a()),l(()=>a().imagem[0]))),j(P,"alt",(i(a()),l(()=>a().titulo))),j(u,"href",`/produto/${i(a()),l(()=>a().id)??""}`),$(T,(i(a()),l(()=>a().titulo))),$(C,(i(a()),l(()=>a().descricao))),$(A,`R$ ${i(a()),l(()=>a().preco)??""}`),$(N,`(${i(a()),l(()=>a().stars)??""})`),j(G,"href",`/produto/${i(a()),l(()=>a().id)??""}`),ra(X,1,sa(e(_)?"bi bi-heart-fill":"bi bi-heart")),$(Y,`(${i(a()),l(()=>a().liked)??""})`)}),oa("click",E,h),L(z,b),H()}var va=S('<h1 class="svelte-h9vanf">Nossos produtos</h1> <hr class="svelte-h9vanf"/> <main class="svelte-h9vanf"><div class="vitrine svelte-h9vanf"><!> <!></div></main>',1);function Pa(z,K){D(K,!1);const a=p(),_=p(),h=p(),b=p();let c=p([]),P=p(!1),g=p(e(_)),u=p(e(h)),x=p([]);function T(o){return o}Z(async()=>{const f=await(await fetch("https://api.globalxsteel.com.br/api/products?page=1&limit=20")).json();m(P,!0),m(c,f.map(t=>{var v;return{id:t._id,preco:t.price,precoOriginal:t.old_price,titulo:t.name,descricao:t.description,stars:((v=t.ratings)==null?void 0:v.length)||0,liked:t.liked||0,sells:t.sells||0,filtro:t.category||"",imagem:t.image||"",category:t.category}})),[...new Set(e(c).map(t=>t.category))],await ta(),document.querySelectorAll('input[type="range"]').forEach(t=>{const v=(t.value-t.min)/(t.max-t.min)*100;t.style.setProperty("--value",`${v}%`)})}),O(()=>e(c),()=>{m(a,e(c).map(o=>o.preco||0))}),O(()=>e(a),()=>{m(_,Math.min(...e(a)))}),O(()=>e(a),()=>{m(h,Math.max(...e(a)))}),O(()=>e(_),()=>{m(g,e(_))}),O(()=>e(h),()=>{m(u,e(h))}),O(()=>(e(c),e(g),e(u),e(x)),()=>{m(b,e(c).filter(o=>{const t=o.preco>=e(g)&&o.preco<=e(u),v=e(x).length===0||e(x).every(N=>o.filtro.toLowerCase().includes(N));return t&&v}))}),aa(),W();var k=va(),C=n(ea(k),4),y=r(C),w=r(y);J(w,1,()=>e(b),Q,(o,f)=>{pa(o,{get product(){return e(f)}})});var A=n(w,2);{var F=o=>{la(o)};I(A,o=>{e(P)||o(F)})}s(y),s(C),L(z,k),H()}export{Pa as component};
