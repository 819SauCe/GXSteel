import"../chunks/CWj6FrbW.js";import"../chunks/Ciih1mrX.js";import{s as O,o as ye}from"../chunks/BrsXXap9.js";import{e as we,ax as ge,a3 as he,aT as be,aU as xe,aj as ne,v as R,am as i,an as l,al as n,af as w,u as _,w as F,as as C,b as e,m as h,ak as ce,f as p,ap as N,aq as ze,ar as $e,aV as le,a as Me}from"../chunks/BSGI3RlU.js";import{i as ve}from"../chunks/D9amEckC.js";import{e as X,i as Y}from"../chunks/CYtQTwf0.js";import{s as x,r as ae,a as Oe,b as qe}from"../chunks/CIU5LcWC.js";import{l as Pe,e as ue}from"../chunks/DN4ffuaz.js";import{b as ie}from"../chunks/Cnj_E5dI.js";import{i as de}from"../chunks/CLfTygMI.js";import{s as Se,c as je}from"../chunks/BQfdN1iM.js";import{p as Ve}from"../chunks/nGPq1FlD.js";/* empty css                */function pe(o,u,a){if(o.multiple){if(u==null)return;if(!he(u))return be();for(var c of o.options)c.selected=u.includes(H(c));return}for(c of o.options){var v=H(c);if(xe(v,u)){c.selected=!0;return}}(!a||u!==void 0)&&(o.selectedIndex=-1)}function Ee(o){var u=new MutationObserver(()=>{pe(o,o.__value)});u.observe(o,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ge(()=>{u.disconnect()})}function oe(o,u,a=u){var c=!0;Pe(o,"change",v=>{var m=v?"[selected]":":checked",d;if(o.multiple)d=[].map.call(o.querySelectorAll(m),H);else{var g=o.querySelector(m)??o.querySelector("option:not([disabled])");d=g&&H(g)}a(d)}),we(()=>{var v=u();if(pe(o,v,c),c&&v===void 0){var m=o.querySelector(":checked");m!==null&&(v=H(m),a(v))}o.__value=v,c=!1}),Ee(o)}function H(o){return"__value"in o?o.__value:o.value}var Ce=R('<span class="text-muted text-decoration-line-through ms-2"> </span>'),Fe=R('<i class="bi bi-star-fill text-warning me-1 svelte-ru78kc"></i>'),Re=R('<div class="card card-fixed m-3 svelte-ru78kc"><a><img class="card-img-top svelte-ru78kc"/></a> <div class="card-body svelte-ru78kc"><a><h5 class="card-title svelte-ru78kc"> </h5></a> <p class="card-text svelte-ru78kc" style="font-size: 0.95rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;"> </p> <p class="card-text mb-1 svelte-ru78kc"><span class="text-danger fw-bold svelte-ru78kc"> </span> <!></p> <p class="mb-2 d-flex align-items-center"><!> <span class="text-muted ms-1"> </span></p> <div class="d-flex justify-content-between align-items-center"><a class="btn btn-primary svelte-ru78kc">Comprar</a> <div class="d-flex align-items-center"><button class="like-btn svelte-ru78kc" aria-label="true"><i></i></button> <span class="text-muted ms-2"> </span></div></div></div></div>');function Te(o,u){ne(u,!1);let a=Ve(u,"product",12),c=h(!1);async function v(){try{const k=await fetch(`http://172.16.0.18:3000/api/like_product/${a().id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"});if(!k.ok)throw new Error("Erro ao favoritar produto");const M=await k.json();p(c,!0),a(a().liked+=1,!0)}catch(k){console.error(k),alert("Você precisa estar logado para curtir produtos.")}}de();var m=Re(),d=i(m),g=i(d);l(d);var z=n(d,2),b=i(z),$=i(b),J=i($,!0);l($),l(b);var f=n(b,2),Z=i(f,!0);l(f);var U=n(f,2),T=i(U),Q=i(T);l(T);var B=n(T,2);{var I=k=>{var M=Ce(),E=i(M);l(M),C(()=>O(E,`R$ ${w(a()),_(()=>a().precoOriginal)??""}`)),F(k,M)};ve(B,k=>{w(a()),_(()=>a().precoOriginal)&&k(I)})}l(U);var S=n(U,2),K=i(S);X(K,1,()=>(w(a()),_(()=>Array(Number(a().stars)).fill(0))),Y,(k,M)=>{var E=Fe();F(k,E)});var W=n(K,2),j=i(W);l(W),l(S);var V=n(S,2),A=i(V),L=n(A,2),q=i(L),ee=i(q);l(q);var D=n(q,2),G=i(D);l(D),l(L),l(V),l(z),l(m),C(()=>{x(d,"href",`/produto/${w(a()),_(()=>a().id)??""}`),x(g,"src",(w(a()),_(()=>a().imagem[0]))),x(g,"alt",(w(a()),_(()=>a().titulo))),x(b,"href",`/produto/${w(a()),_(()=>a().id)??""}`),O(J,(w(a()),_(()=>a().titulo))),O(Z,(w(a()),_(()=>a().descricao))),O(Q,`R$ ${w(a()),_(()=>a().preco)??""}`),O(j,`(${w(a()),_(()=>a().stars)??""})`),x(A,"href",`/produto/${w(a()),_(()=>a().id)??""}`),Se(ee,1,je(e(c)?"bi bi-heart-fill":"bi bi-heart")),O(G,`(${w(a()),_(()=>a().liked)??""})`)}),ue("click",q,v),F(o,m),ce()}var Ke=R('<div style="display: flex; gap: 1rem;" class="svelte-wknuyz"><input type="checkbox" class="svelte-wknuyz"/> <label class="svelte-wknuyz"> </label></div>'),Ae=R('<option class="svelte-wknuyz"> </option>'),Le=R('<div class="preloader svelte-wknuyz"><svg class="cart svelte-wknuyz" role="img" aria-label="Shopping cart line animation" viewBox="0 0 128 128" width="128px" height="128px" xmlns="http://www.w3.org/2000/svg"><g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="8" class="svelte-wknuyz"><g class="cart__track svelte-wknuyz" stroke="hsla(0,10%,10%,0.1)"><polyline points="4,4 21,4 26,22 124,22 112,64 35,64 39,80 106,80" class="svelte-wknuyz"></polyline><circle cx="43" cy="111" r="13" class="svelte-wknuyz"></circle><circle cx="102" cy="111" r="13" class="svelte-wknuyz"></circle></g><g class="cart__lines svelte-wknuyz" stroke="currentColor"><polyline class="cart__top svelte-wknuyz" points="4,4 21,4 26,22 124,22 112,64 35,64 39,80 106,80" stroke-dasharray="338 338" stroke-dashoffset="-338"></polyline><g class="cart__wheel1 svelte-wknuyz" transform="rotate(-90,43,111)"><circle class="cart__wheel-stroke svelte-wknuyz" cx="43" cy="111" r="13" stroke-dasharray="81.68 81.68" stroke-dashoffset="81.68"></circle></g><g class="cart__wheel2 svelte-wknuyz" transform="rotate(90,102,111)"><circle class="cart__wheel-stroke svelte-wknuyz" cx="102" cy="111" r="13" stroke-dasharray="81.68 81.68" stroke-dashoffset="81.68"></circle></g></g></g></svg> <div class="preloader__text svelte-wknuyz"><p class="preloader__msg svelte-wknuyz">Espere um momento</p> <p class="preloader__msg preloader__msg--last svelte-wknuyz">Estamos vendo algo para vc</p></div></div>'),Ne=R('<h1 class="svelte-wknuyz">Nossos produtos</h1> <hr class="svelte-wknuyz"/> <main class="svelte-wknuyz"><aside class="filtro svelte-wknuyz"><h2 class="svelte-wknuyz">Filtros</h2> <div class="campo svelte-wknuyz"></div> <div class="campo svelte-wknuyz"><label class="svelte-wknuyz"> </label> <input type="range" class="svelte-wknuyz"/> <input type="range" class="svelte-wknuyz"/></div> <div class="campo svelte-wknuyz"><label class="svelte-wknuyz">Estrelas mínimas</label> <select class="svelte-wknuyz"><option class="svelte-wknuyz">Todas</option><!></select></div> <div class="campo svelte-wknuyz"><label class="svelte-wknuyz">Ordenar por</label> <select class="svelte-wknuyz"><option class="svelte-wknuyz">--</option><option class="svelte-wknuyz">Mais curtidos</option><option class="svelte-wknuyz">Mais vendidos</option><option class="svelte-wknuyz">Menos vendidos</option></select></div></aside> <div class="vitrine svelte-wknuyz"><!> <!></div></main>',1);function aa(o,u){ne(u,!1);const a=h(),c=h(),v=h(),m=h();let d=h([]),g=h(e(c)),z=h(e(v)),b=h(""),$=h(""),J=h([]),f=h([]);function Z(s){e(f).includes(s)?p(f,e(f).filter(r=>r!==s)):p(f,[...e(f),s])}function U(s){return e($)==="curtidos"?[...s].sort((r,t)=>(t.liked||0)-(r.liked||0)):e($)==="maisVendidos"?[...s].sort((r,t)=>(t.sells||0)-(r.sells||0)):e($)==="menosVendidos"?[...s].sort((r,t)=>(r.sells||0)-(t.sells||0)):s}ye(async()=>{const r=await(await fetch("http://172.16.0.18:3000/api/products?page=1&limit=20")).json();p(d,r.map(t=>{var y;return{id:t._id,preco:t.price,precoOriginal:t.old_price,titulo:t.name,descricao:t.description,stars:((y=t.ratings)==null?void 0:y.length)||0,liked:t.liked||0,sells:t.sells||0,filtro:t.category||"",imagem:t.image||"",category:t.category}})),p(J,[...new Set(e(d).map(t=>t.category))])}),N(()=>e(d),()=>{p(a,e(d).map(s=>s.preco||0))}),N(()=>e(a),()=>{p(c,Math.min(...e(a)))}),N(()=>e(a),()=>{p(v,Math.max(...e(a)))}),N(()=>e(c),()=>{p(g,e(c))}),N(()=>e(v),()=>{p(z,e(v))}),N(()=>(e(d),e(b),e(g),e(z),e(f)),()=>{p(m,U(e(d).filter(s=>{const r=!e(b)||s.stars>=+e(b),t=s.preco>=e(g)&&s.preco<=e(z),y=e(f).length===0||e(f).every(P=>s.filtro.toLowerCase().includes(P));return r&&t&&y})))}),ze(),de();var T=Ne(),Q=n($e(T),4),B=i(Q),I=n(i(B),2);X(I,5,()=>e(J),Y,(s,r)=>{var t=Ke(),y=i(t);ae(y);var P=n(y,2),fe=i(P,!0);l(P),l(t),C(ke=>{x(y,"id",e(r)),Oe(y,e(r)),qe(y,ke),x(P,"for",e(r)),O(fe,e(r))},[()=>(e(f),e(r),_(()=>e(f).includes(e(r))))],Me),ue("change",y,()=>Z(e(r))),F(s,t)}),l(I);var S=n(I,2),K=i(S),W=i(K);l(K);var j=n(K,2);ae(j);var V=n(j,2);ae(V),l(S);var A=n(S,2),L=n(i(A),2);C(()=>{e(b),le(()=>{})});var q=i(L);q.value=q.__value="";var ee=n(q);X(ee,0,()=>[1,2,3,4,5],Y,(s,r)=>{var t=Ae(),y=i(t);l(t);var P={};C(()=>{O(y,`${r??""} estrela${r>1?"s":""}`),P!==(P=r)&&(t.value=(t.__value=r)??"")}),F(s,t)}),l(L),l(A);var D=n(A,2),G=n(i(D),2);C(()=>{e($),le(()=>{})});var k=i(G);k.value=k.__value="";var M=n(k);M.value=M.__value="curtidos";var E=n(M);E.value=E.__value="maisVendidos";var se=n(E);se.value=se.__value="menosVendidos",l(G),l(D),l(B);var te=n(B,2),re=i(te);X(re,1,()=>e(m),Y,(s,r)=>{Te(s,{get product(){return e(r)}})});var _e=n(re,2);{var me=s=>{var r=Le();F(s,r)};ve(_e,s=>{e(m),_(()=>e(m).length===0)&&s(me)})}l(te),l(Q),C(()=>{O(W,`Preço: R$ ${e(g)??""} – R$ ${e(z)??""}`),x(j,"min",e(c)),x(j,"max",e(v)),x(V,"min",e(c)),x(V,"max",e(v))}),ie(j,()=>e(g),s=>p(g,s)),ie(V,()=>e(z),s=>p(z,s)),oe(L,()=>e(b),s=>p(b,s)),oe(G,()=>e($),s=>p($,s)),F(o,T),ce()}export{aa as component};
